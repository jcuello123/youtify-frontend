(this["webpackJsonpyoutify-frontend"]=this["webpackJsonpyoutify-frontend"]||[]).push([[0],{105:function(e,t,n){},110:function(e,t,n){"use strict";n.r(t);var a,r=n(0),o=n.n(r),c=n(8),s=n.n(c),i=(n(75),n(38)),l=n(24),u=n.n(l),p=n(56),d=n.n(p).a.parse(window.location.search).access_token,m=(n(105),n(145)),h=n(146),f=n(140),y=function(e){var t=e.displaySongs,n=e.playlist,a=e.addToPlaylist,r=e.setOpenSuccess,c=e.setOpenError;return o.a.createElement(o.a.Fragment,null,o.a.createElement(f.a,{style:{background:"#1db954",color:"white",margin:"10px"},variant:"contained",onClick:function(){return t(n)}},"Display playlist"),o.a.createElement(f.a,{style:{background:"#1db954",color:"white",margin:"10px"},variant:"contained",onClick:function(){return a(n,r,c)}},"Add to ",n.name))},b=n(61),v=Object(b.a)({palette:{primary:{main:"#1db954"}},overrides:{MuiOutlinedInput:{root:{position:"relative","& $notchedOutline":{borderColor:"#1db954"},"&:hover:not($disabled):not($focused):not($error) $notchedOutline":{borderColor:"#1db954","@media (hover: none)":{borderColor:"#1db954"}},"&$focused $notchedOutline":{borderColor:"#1db954",borderWidth:1}}},MuiFormLabel:{root:{color:"#1db954"}}}}),g=n(149),k=n(147),w=function(e){var t=e.open_success,n=e.open_error,a=e.handleClose;return o.a.createElement(o.a.Fragment,null,o.a.createElement(g.a,{open:t,autoHideDuration:6e3,onClose:a},o.a.createElement(k.a,{variant:"filled",onClose:a,severity:"success"},"Successfully added playlist!")),o.a.createElement(g.a,{open:n,autoHideDuration:6e3,onClose:a},o.a.createElement(k.a,{variant:"filled",onClose:a,severity:"error"},"There was an error when trying to add the playlist. Note: make sure you display the songs first.")))},E=n(15),_=n.n(E),O=n(27),x=[];function j(e){return C.apply(this,arguments)}function C(){return(C=Object(O.a)(_.a.mark((function e(t){var n,r,o,c,s,i;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=document.getElementById(t.name).value,a&&a.name!==t.name&&(r=a.name.replaceAll(" ","_").replace(/[^\w\s]/gi,""),x=[],document.querySelector(".".concat(r)).innerHTML="",document.getElementById(r).value=""),a=t,n){e.next=5;break}return e.abrupt("return");case 5:return o=t.name.replaceAll(" ","_").replace(/[^\w\s]/gi,""),(c=document.querySelector(".".concat(o))).innerHTML="",e.next=10,A(t);case 10:s=e.sent,i=s.songs_and_track_uris,setTimeout(Object(O.a)(_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i.forEach((function(e){var t=e.song,n=document.createElement("div"),a=document.createElement("p"),r="t"+t[1].song_name.replaceAll(" ","_").replace(/[^\w\s]/gi,"");n.classList="".concat(r," display_song"),n.addEventListener("click",(function(){return T(r,e)})),a.textContent="".concat(t[1].artist," - ").concat(t[1].song_name),n.appendChild(a),c.appendChild(n)}));case 1:case"end":return e.stop()}}),e)}))),500);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(e){return S.apply(this,arguments)}function S(){return(S=Object(O.a)(_.a.mark((function e(t){var n,a,r,o;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=document.getElementById(t.name).value,a=[],e.next=4,u.a.post("http://localhost:3001/songs",{youtube_playlist_link:n});case 4:return r=e.sent,o=r.data,(o=Object.entries(o)).forEach(function(){var e=Object(O.a)(_.a.mark((function e(t){var n,r,o;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.get("https://api.spotify.com/v1/search?q=artist%3A".concat(t[1].artist,"+track%3A").concat(t[1].song_name,"&type=track&limit=1"),{headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+d}});case 2:n=e.sent,(r=n.data.tracks.items).length>0&&(o=r[0].uri,x.push(o),a.push({song:t,track_uri:o}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.abrupt("return",{songs_and_track_uris:a});case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e,t){var n=x.indexOf(t.track_uri);x.splice(n,1),document.querySelector(".".concat(e)).remove()}function B(e,t,n){return $.apply(this,arguments)}function $(){return($=Object(O.a)(_.a.mark((function e(t,n,r){var o;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t.name.replaceAll(" ","_").replace(/[^\w\s]/gi,""),n(!1),r(!1),a&&a.name===t.name){e.next=5;break}return e.abrupt("return");case 5:if(!(x.length>0)){e.next=9;break}n(!0),e.next=11;break;case 9:return r(!0),e.abrupt("return");case 11:return e.next=13,u.a.post("https://api.spotify.com/v1/playlists/".concat(t.id,"/tracks"),{uris:x},{headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+d}});case 13:x=[],document.querySelector(".".concat(o)).innerHTML="",document.getElementById(o).value="";case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var I=function(){Object(r.useEffect)((function(){u.a.get("https://api.spotify.com/v1/me/playlists",{headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+d}}).then((function(e){return a(e.data.items)}))}),[]);var e=Object(r.useState)([]),t=Object(i.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(!1),s=Object(i.a)(c,2),l=s[0],p=s[1],f=Object(r.useState)(!1),b=Object(i.a)(f,2),g=b[0],k=b[1];return o.a.createElement("div",{className:"App"},n.map((function(e,t){return o.a.createElement("div",{className:"playlist",key:t},o.a.createElement("h1",null,"Playlist: ",e.name),e.images.length>0&&o.a.createElement("img",{style:{width:"25%",borderRadius:"8px"},src:e.images[0].url}),o.a.createElement(m.a,{theme:v},o.a.createElement(h.a,{style:{background:"black",margin:"10px",borderRadius:"7px"},InputProps:{style:{color:"white"}},label:"YouTube playlist",variant:"outlined",id:e.name})),o.a.createElement("div",{className:e.name.replaceAll(" ","_").replace(/[^\w\s]/gi,"")}),o.a.createElement(y,{displaySongs:j,playlist:e,addToPlaylist:B,setOpenSuccess:p,setOpenError:k}))})),o.a.createElement(w,{open_success:l,open_error:g,handleClose:function(e,t){"clickaway"!==t&&(l&&p(!1),g&&k(!1))}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(I,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},70:function(e,t,n){e.exports=n(110)},75:function(e,t,n){}},[[70,1,2]]]);
//# sourceMappingURL=main.b2b468fb.chunk.js.map